<?php
$partialViewPath = 'partials/';
$pageHeader = new FrontEnd_Helper_PageHeaderPartialFunctions();
echo $pageHeader->getTop20Header(
    $this->pageTitle,
    $this->subtitle,
    $pageHeader->getCategoryOrPageHeaderImage($this->pageHeaderImage)
);
?>
<div class="row">
    <div id="content" class="col-md-8 col-sm-8">
<?php 
if(count($this->top20PopularOffers) > 0):
    echo $this->partial(
        $partialViewPath.'_offer.phtml',
        array(
            'offers' => $this->top20PopularOffers,
            'offersType'=>'top20',
            'shopName' =>'',
            'shopId' =>'',
            'zendForm'=>$this->form,
            'widgetPosition'=>$this->widgetPosition
        )
    );
endif;

$popularStores = '';
if (!empty($this->popularStores)) :
     $popularStores = $this->partial(
         $partialViewPath.'_popular-stores.phtml',
         array(
            'popularStores' => $this->popularStores,
            'headerText' => $this->translate('Popular Stores')
        )
     );
endif;
echo $popularStores; ?>

    </div>
    <aside class="col-md-4 col-sm-4" id="sidebar">
<?php
$frontendSidebarHelper = new FrontEnd_Helper_SidebarWidgetFunctions();
echo $frontendSidebarHelper->getPageEditorWidget('top20', $this);
$this->locale = LOCALE != 'en' ? LOCALE . '/' : '';
echo $this->esi($this->locale.'signup/signupwidget?shopId='
    .'&signupFormWidgetType=sidebarWidget&shopLogoOrDefaultImage=');
echo $frontendSidebarHelper->popularShopWidget();
echo $frontendSidebarHelper->popularCategoryWidget();
echo $this->partial('socialcode/social-code.phtml', array('zendForm' => $this->zendForm));
?>
    </aside>
</div>
